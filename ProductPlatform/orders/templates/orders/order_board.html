{% extends 'base.html' %} {% load static %}

{% block content %}
<h1 class="text-center mt-4">Доска Заказов</h1>

<form action="" method="post">
  {% csrf_token %}
  <section>
    <div class="container mt-4">
      <div class="row">
        <div class="col-2">
        <a class="btn btn-outline-primary w-100 mb-1" data-f="Все категории" href="{% url 'orders:order-board' %}">Все категории</a>
            {% for item in all_category %}
          <a class="btn btn-outline-danger w-100 mb-1" data-f="{{ item.name }}" href="{% url 'orders:order_filter' item.id %}">{{ item.name }}</a>
            {% endfor %}
        </div>
        <div class="col-10">
          {% if all_orders %}
          <table
            id="datatable"
            class="meeting-table table count-digit table-bordered table-hover"
          >
            <thead>
              <tr class="count-digit">
                <th>№</th>
                <th>Наименование</th>
                <th>Категория</th>
                <th>Фирма</th>
                <th>Дата заказа</th>
                <th>Действует до</th>
                <th>Статус</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              
              {% for row in all_orders %}
              <tr
                class="meeting-table-row"
                data-href="{% url 'orders:order' row.id %}"
              >
                <td>{{ forloop.counter }}</td>
                <td>{{ row.name }}</td>
                <td class="category_row">{{ row.category }}</td>
                <td>{{ row.author }}</td>
                <td>{{ row.create_at }}</td>
                <td>{{ row.end_time }}</td>
                
                
                <td {% if row.status == 'Active'%} class="text-success" {% else %} class="text-danger" {% endif %}> {{ row.status }}</td>
                <td>
                  {% if row.status == 'Active'%}
                  <button type="submit" class="btn btn-success">Принять</button>
                  {% endif %}
                </td>
              </tr>
              {% endfor %}

            </tbody>
          </table>
          {% else %}
          <h4 class="text-left text-primary">Заказов в данной категории нет, выберите другую категорию.</h4>
          {% endif %}

        </div>

      </div>
          
        
        </div>
         
        </div>
      </div>
    </div>
  </section>
</form>

{% endblock %} {% block morejs %}
<script>
  $(document).ready(function ($) {
    $('.meeting-table-row').click(function () {
      window.document.location = $(this).data('href');
    });
  });
</script>
{% endblock %}
