{% extends 'users/login_reg_base.html' %}

{% block errors %}
    {% if form.errors %}
        <div
                id="error-list"
                class="alert fade show"
                role="alert"
                style="margin-top: 50px; display: flex;"
        >
            <div>
                {% for error in form.errors.values %}
                    {{ error }}
                {% endfor %}
            </div>
            <button
                    id="close-btn"
                    type="button"
                    class="close"
                    data-dismiss="alert"
                    aria-label="Close"
            >
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    {% endif %}
{% endblock %}

{% block content %}
    {% if validlink %}
        <form action="#" method="post" id="contact">
            {% csrf_token %}
            <div class="row">
                <div class="col-lg-12">
                    <h2>Изменение пароля</h2>
                </div>
                <div class="col-lg-12 inp">
                    <fieldset>
                        <label class="small mb-1">Новый пароль:</label>
                        {{ form.new_password1 }}
                    </fieldset>
                </div>
                <div class="col-lg-12 inp">
                    <fieldset>
                        <label class="small mb-1">Подтверждение нового пароля:</label>
                        {{ form.new_password2 }}
                    </fieldset>
                </div>
                <div class="col-lg-12 submit-btn">
                    <fieldset>
                        <button class="button button-login-reg"
                                id='register_button'
                                type="submit">
                            Изменить пароль
                        </button>
                    </fieldset>
                </div>
            </div>
        </form>
    {% else %}
        <div id="contact">
            <div class="row">
                <div class="col-lg-12">
                    <h2>Изменение пароля</h2>
                </div>
                <div class="col-lg-12 inp">
                    <fieldset>
                        <label class="small mb-1">
                            Ссылка на сброс пароля была недействительной, возможно, потому что она уже была
                            использована. Пожалуйста, запросите новый сброс пароля.
                        </label>
                    </fieldset>
                </div>
            </div>
            <div class="footer">
                <p><a href="{% url 'main' %}">На главную</a></p>
            </div>
        </div>
    {% endif %}
{% endblock %}